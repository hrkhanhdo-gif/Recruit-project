<!DOCTYPE html>
<html>

<head>
    <base target="_top">
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Quill.js CSS -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

    <style>
        /* MENTION SUGGESTIONS */
        #mention-suggestions {
            position: absolute;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            max-height: 200px;
            overflow-y: auto;
            z-index: 1060;
            /* Higher than modal */
            display: none;
            width: 250px;
        }

        .mention-item {
            padding: 8px 12px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
        }

        .mention-item:hover {
            background-color: #f1f3f5;
        }

        .mention-item.active {
            background-color: #e9ecef;
        }
    </style>

    <?!= include('css'); ?>
    <script>
        window.onerror = function (message, source, lineno, colno, error) {
            alert('Global Error: ' + message + ' at line ' + lineno);
        };
        var hasDB = <?!= typeof isDbSetup !== "undefined" ? isDbSetup : "false" ?>;
    </script>
</head>

<body>

    <!-- LOGIN SCREEN -->
    <div id="login-screen">
        <div class="login-box">
            <div class="mb-4">
                <i class="fas fa-user-circle fa-4x" style="color: var(--primary-color);"></i>
            </div>
            <h2>ƒêƒÉng Nh·∫≠p H·ªá Th·ªëng</h2>
            <div class="mb-3 text-start">
                <label class="form-label">T√™n ƒëƒÉng nh·∫≠p</label>
                <input type="text" class="form-control" id="login-username" placeholder="admin">
            </div>
            <div class="mb-4 text-start">
                <label class="form-label">M·∫≠t kh·∫©u</label>
                <input type="password" class="form-control" id="login-password" placeholder="******">
            </div>
            <button class="btn btn-primary-custom" onclick="handleLogin()">ƒêƒÇNG NH·∫¨P</button>
            <p class="mt-3 text-muted" id="login-message"></p>

            <!-- Loading Spinner for Login -->
            <div id="login-loader" class="spinner-border text-warning mt-3" role="status" style="display:none;">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>

    <!-- MAIN APP (Hidden by default) -->
    <div id="app-container" style="display:none;">

        <!-- Sidebar -->
        <div class="sidebar">
            <div class="brand">
                <i class="fas fa-briefcase"></i> HR RECRUIT
            </div>
            <nav>
                <a href="javascript:void(0)" class="nav-link active" onclick="showSection('dashboard', this)">
                    <i class="fas fa-chart-pie"></i> T·ªïng Quan
                    <span id="nav-eval-badge" class="badge rounded-pill bg-danger ms-1"
                        style="display:none; font-size: 0.65rem;">0</span>
                </a>
                <a href="javascript:void(0)" class="nav-link" onclick="showSection('candidates', this)">
                    <i class="fas fa-users"></i> ·ª®ng Vi√™n
                </a>
                <a href="javascript:void(0)" class="nav-link" onclick="showSection('kanban', this)">
                    <i class="fas fa-columns"></i> B·∫£ng Kanban
                </a>
                <a href="javascript:void(0)" class="nav-link" onclick="showSection('evaluations', this)"
                    id="nav-evaluations">
                    <i class="fas fa-clipboard-check"></i> ƒê√°nh gi√° PV
                </a>
                <a href="javascript:void(0)" class="nav-link" onclick="showSection('jobs', this)" id="nav-jobs">
                    <i class="fas fa-briefcase"></i> V·ªã tr√≠ Tuy·ªÉn d·ª•ng
                </a>
                <a href="javascript:void(0)" class="nav-link" onclick="showSection('recruitment-hub', this)"
                    id="nav-recruitment-hub">
                    <i class="fas fa-layer-group"></i> Qu·∫£n l√Ω Tuy·ªÉn d·ª•ng
                </a>
                <a href="javascript:void(0)" class="nav-link" onclick="showSection('calendar-section', this)"
                    id="nav-calendar">
                    <i class="fas fa-calendar-alt"></i> L·ªãch ph·ªèng v·∫•n
                </a>
                <a href="javascript:void(0)" class="nav-link" onclick="showSection('settings', this)" id="nav-settings">
                    <i class="fas fa-cogs"></i> C√†i ƒê·∫∑t
                </a>
                <a href="javascript:void(0)" class="nav-link" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> ƒêƒÉng Xu·∫•t
                </a>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">

            <!-- Top Bar -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h3 id="page-title" class="fw-bold">T·ªïng Quan</h3>
                <div class="d-flex align-items-center">
                    <span class="me-3 fw-bold"><i class="fas fa-user"></i> Xin ch√†o, <span
                            id="current-user-display">Admin</span></span>
                    <div class="dropdown">
                        <button class="btn btn-sm btn-outline-warning position-relative" id="btn-notifications"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-bell"></i>
                            <span
                                class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                                id="notification-badge" style="display: none;">
                                0
                                <span class="visually-hidden">unread messages</span>
                            </span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end shadow p-0" aria-labelledby="btn-notifications"
                            style="width: 350px; max-height: 400px; overflow-y: auto;">
                            <li class="p-2 border-bottom d-flex justify-content-between align-items-center bg-light">
                                <span class="fw-bold">Th√¥ng b√°o</span>
                                <small class="text-primary" style="cursor: pointer;"
                                    onclick="markAllNotificationsRead()">ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc</small>
                            </li>
                            <div id="notification-list">
                                <li class="text-center p-3 text-muted">Kh√¥ng c√≥ th√¥ng b√°o m·ªõi</li>
                            </div>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- SECTIONS -->

            <!-- 1. DASHBOARD -->
            <div id="dashboard" class="section active">
                <!-- PENDING EVALUATIONS SECTION (Moved to Notifications as requested) -->
                <!-- <div id="dashboard-eval-container" style="display:none;"></div> -->

                <!-- Stat Cards -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="stat-card bg-gradient-blue p-3">
                            <h5>T·ªïng ·ª®ng Vi√™n</h5>
                            <h2 class="fw-bold" id="stat-total-candidates">0</h2>
                            <small><i class="fas fa-arrow-up"></i> +5 tu·∫ßn n√†y</small>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card bg-gradient-green p-3">
                            <h5>ƒê√£ Tuy·ªÉn</h5>
                            <h2 class="fw-bold" id="stat-hired">0</h2>
                            <small>Trong th√°ng n√†y</small>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card bg-gradient-orange p-3">
                            <h5>ƒêang Ph·ªèng V·∫•n</h5>
                            <h2 class="fw-bold" id="stat-interviewing">0</h2>
                            <small>C·∫ßn x·ª≠ l√Ω g·∫•p</small>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card bg-gradient-red p-3">
                            <h5>ƒê√£ T·ª´ Ch·ªëi</h5>
                            <h2 class="fw-bold" id="stat-rejected">0</h2>
                            <small>T·ª∑ l·ªá 52%</small>
                        </div>
                    </div>
                </div>

                <!-- Charts Area -->
                <div class="row">
                    <div class="col-md-8">
                        <div class="card border-0 shadow-sm p-3 mb-4">
                            <h5 class="card-title mb-3">Hi·ªáu su·∫•t tuy·ªÉn d·ª•ng theo th√°ng</h5>
                            <canvas id="recruitmentChart" height="150"></canvas>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card border-0 shadow-sm p-3 mb-4">
                            <h5 class="card-title mb-3">Ngu·ªìn ·ª©ng vi√™n</h5>
                            <canvas id="sourceChart" height="300"></canvas>
                        </div>
                    </div>
                </div>

                <!-- ANALYTICS ROW -->
                <div class="row">
                    <div class="col-md-8">
                        <div class="card border-0 shadow-sm p-3 mb-4">
                            <h5 class="card-title mb-3">Ph·ªÖu Tuy·ªÉn D·ª•ng (Funnel)</h5>
                            <canvas id="funnelChart" height="150"></canvas>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card border-0 shadow-sm p-3 mb-4 bg-primary text-white text-center">
                            <h5 class="card-title mb-0">Th·ªùi Gian Tuy·ªÉn D·ª•ng TB</h5>
                            <h2 class="fw-bold display-4 my-3" id="stat-time-to-hire">0</h2>
                            <p class="mb-0">ng√†y / ·ª©ng vi√™n</p>
                        </div>
                        <div class="card border-0 shadow-sm p-3 mb-4">
                            <h5 class="card-title mb-3">T·ª∑ L·ªá Chuy·ªÉn ƒê·ªïi</h5>
                            <h2 class="fw-bold text-success text-center" id="stat-conversion-rate">0%</h2>
                            <p class="text-muted text-center mb-0">Apply -> Hired</p>
                        </div>
                    </div>
                </div>

                <!-- ADVANCED ANALYTICS (NEW) -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="card border-0 shadow-sm p-3 mb-4">
                            <h5 class="card-title mb-3"><i class="fas fa-chart-pie me-2 text-danger"></i>Ph√¢n t√≠ch l√Ω do
                                t·ª´ ch·ªëi</h5>
                            <canvas id="rejectionAnalysisChart" height="250"></canvas>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card border-0 shadow-sm p-3 mb-4">
                            <h5 class="card-title mb-3"><i class="fas fa-stopwatch me-2 text-primary"></i>Time to Hire
                                theo ph√≤ng ban (ng√†y)</h5>
                            <canvas id="timeToHireChart" height="250"></canvas>
                        </div>
                    </div>
                </div>


                <!-- RECENT ACTIVITY (Moved inside Dashboard) -->
                <div class="row mt-4">
                    <div class="col-12">
                        <div class="card border-0 shadow-sm p-3">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="card-title fw-bold"><i class="fas fa-history"></i> Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</h5>
                                <button class="btn btn-sm btn-outline-secondary" onclick="loadActivityLogs()"><i
                                        class="fas fa-sync-alt"></i></button>
                            </div>
                            <div id="activity-log-container" style="max-height: 400px; overflow-y: auto;">
                                <div class="text-center text-muted py-3">ƒêang t·∫£i...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Removed premature closing div of main-content -->

            <!-- 2. KANBAN BOARD -->
            <div id="kanban" class="section">
                <div class="d-flex justify-content-between mb-3 flex-wrap gap-2">
                    <div class="d-flex gap-2 flex-wrap">
                        <select id="kanban-filter-project" class="form-select w-auto" onchange="renderKanbanBoard()">
                            <option value="">-- T·∫•t c·∫£ D·ª± √°n --</option>
                        </select>
                        <input type="text" id="kanban-search" class="form-control" placeholder="T√¨m ki·∫øm ·ª©ng vi√™n..."
                            style="width: 200px;" onkeyup="renderKanbanBoard()">
                        <select id="filter-department" class="form-select w-auto">
                            <option value="">T·∫•t c·∫£ ph√≤ng ban</option>
                        </select>
                        <select id="filter-position" class="form-select w-auto">
                            <option value="">T·∫•t c·∫£ v·ªã tr√≠</option>
                        </select>
                        <select id="filter-recruiter" class="form-select w-auto">
                            <option value="">Ng∆∞·ªùi ph·ª• tr√°ch</option>
                        </select>
                        <input type="date" id="filter-date-from" class="form-control w-auto" placeholder="T·ª´ ng√†y">
                        <input type="date" id="filter-date-to" class="form-control w-auto" placeholder="ƒê·∫øn ng√†y">
                    </div>
                    <button class="btn btn-primary btn-add-candidate" onclick="openCandidateDetail()">
                        <i class="fas fa-plus me-1"></i> Th√™m ·ª®ng Vi√™n
                    </button>
                    <button class="btn btn-outline-primary ms-2 btn-add-candidate" data-bs-toggle="modal"
                        data-bs-target="#bulkUploadModal">
                        <i class="fas fa-file-import me-1"></i> Import CV
                    </button>
                </div>

                <div class="kanban-board" id="kanban-container">
                    <!-- Loading spinner (controlled by JS) -->
                    <div class="text-center py-5" id="kanban-loading" style="display: none;">
                        <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-3 text-muted fw-bold">ƒêang t·∫£i d·ªØ li·ªáu...</p>
                    </div>
                </div>
            </div>

            <!-- 3. CANDIDATES LIST -->
            <div id="candidates" class="section">
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <h4 class="card-title mb-4">Danh s√°ch ·ª©ng vi√™n</h4>
                        <div class="table-responsive">
                            <table class="table table-hover" id="candidates-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>H·ªç T√™n</th>
                                        <th>V·ªã tr√≠</th>
                                        <th>Ng√†y ·ª©ng tuy·ªÉn</th>
                                        <th>Tr·∫°ng th√°i</th>
                                        <th>Thao t√°c</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data rows go here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- JOBS SECTION -->
            <div id="evaluations" class="section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h3 class="fw-bold"><i class="fas fa-clipboard-check"></i> Qu·∫£n l√Ω ƒê√°nh gi√° Ph·ªèng v·∫•n</h3>
                        <p class="text-muted">Theo d√µi v√† th·ª±c hi·ªán ƒë√°nh gi√° ·ª©ng vi√™n</p>
                    </div>
                    <div>
                        <button class="btn btn-outline-danger me-2"
                            onclick="google.script.run.withSuccessHandler(res => Swal.fire({title: 'DEBUG', html: '<pre style=\'text-align:left;font-size:10px\'>' + res + '</pre>', width: '800px'})).debugSheetData()">
                            <i class="fas fa-bug"></i>
                        </button>
                        <button class="btn btn-primary" type="button" onclick="openCreateEvaluationModal()">
                            <i class="fas fa-plus-circle"></i> T·∫°o Phi·∫øu ƒê√°nh gi√°
                        </button>
                        <button class="btn btn-outline-secondary" type="button" onclick="loadEvaluations()">
                            <i class="fas fa-sync-alt"></i> L√†m m·ªõi
                        </button>
                        <button class="btn btn-outline-danger btn-sm ms-2" type="button"
                            onclick="confirmResetEvaluationSheet()"
                            title="X√≥a v√† t·∫°o l·∫°i b·∫£ng (D√†nh cho s·ª≠a l·ªói c·∫•u h√¨nh)">
                            <i class="fas fa-redo"></i> Reset Sheet
                        </button>
                    </div>
                </div>

                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover align-middle" id="evaluations-table">
                                <thead class="table-light">
                                    <tr>
                                        <th>ID</th>
                                        <th>·ª®ng vi√™n</th>
                                        <th>V·ªã tr√≠</th>
                                        <th>Ng∆∞·ªùi ƒë√°nh gi√°</th>
                                        <th>Tr·∫°ng th√°i</th>
                                        <th>K·∫øt qu·∫£</th>
                                        <th>Ng√†y t·∫°o</th>
                                        <th>Thao t√°c</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Data rows go here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- JOBS SECTION -->
            <div id="jobs" class="section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h3>Qu·∫£n l√Ω Tin Tuy·ªÉn D·ª•ng</h3>
                    <div>
                        <button class="btn btn-outline-danger me-2" onclick="debugUserInfo()">
                            <i class="fas fa-bug"></i> Debug User
                        </button>
                        <button class="btn btn-primary-custom" data-bs-toggle="modal" data-bs-target="#addJobModal">
                            <i class="fas fa-plus"></i> T·∫°o Tin M·ªõi
                        </button>
                    </div>
                </div>
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover align-middle" id="jobs-table">
                                <thead class="table-light">
                                    <tr>
                                        <th>ID</th>
                                        <th>V·ªã tr√≠</th>
                                        <th>Ph√≤ng ban</th>
                                        <th>ƒê·ªãa ƒëi·ªÉm</th>
                                        <th>Ng√†y t·∫°o</th>
                                        <th>Tr·∫°ng th√°i</th>
                                        <th>H√†nh ƒë·ªông</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RECRUITMENT HUB (Merged Projects & Tickets) -->
            <div id="recruitment-hub" class="section">
                <div class="card border-0 shadow-sm mb-4">
                    <div class="card-header bg-white border-bottom-0 pb-0 pt-3">
                        <ul class="nav nav-tabs card-header-tabs" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active fw-bold" data-bs-toggle="tab" href="#hub-projects">
                                    <i class="fas fa-project-diagram me-2"></i>D·ª± √°n Tuy·ªÉn d·ª•ng
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link fw-bold" data-bs-toggle="tab" href="#hub-tickets">
                                    <i class="fas fa-ticket-alt me-2"></i>Phi·∫øu y√™u c·∫ßu (Tickets)
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="tab-content">
                    <!-- PROJECTS TAB -->
                    <div class="tab-pane fade show active" id="hub-projects">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <div>
                                <h4 class="fw-bold mb-0">Danh s√°ch D·ª± √°n</h4>
                                <small class="text-muted">Qu·∫£n l√Ω chi·∫øn d·ªãch v√† quy tr√¨nh tuy·ªÉn d·ª•ng</small>
                            </div>
                            <div>
                                <button class="btn btn-primary" onclick="openProjectModal()">
                                    <i class="fas fa-plus"></i> T·∫°o D·ª± √°n M·ªõi
                                </button>
                                <button class="btn btn-outline-secondary" onclick="loadProjects()">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card border-0 shadow-sm">
                            <div class="card-body p-0">
                                <div class="table-responsive">
                                    <table class="table table-hover align-middle mb-0" id="projects-table">
                                        <thead class="table-light">
                                            <tr>
                                                <th class="ps-3">M√£ D·ª± √°n</th>
                                                <th>T√™n D·ª± √°n</th>
                                                <th>ƒê√£ tuy·ªÉn / S·ªë l∆∞·ª£ng</th>
                                                <th>Chi ph√≠ / Ng√¢n s√°ch</th>
                                                <th>Qu·∫£n l√Ω</th>
                                                <th>Ng√†y b·∫Øt ƒë·∫ßu</th>
                                                <th>Ng√†y k·∫øt th√∫c</th>
                                                <th>Tr·∫°ng th√°i</th>
                                                <th class="pe-3 text-center">Thao t√°c</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- TICKETS TAB -->
                    <div class="tab-pane fade" id="hub-tickets">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <div>
                                <h4 class="fw-bold mb-0">Phi·∫øu y√™u c·∫ßu tuy·ªÉn d·ª•ng</h4>
                                <small class="text-muted">Theo d√µi y√™u c·∫ßu nh√¢n s·ª± t·ª´ c√°c ph√≤ng ban</small>
                            </div>
                            <div>
                                <button class="btn btn-success" onclick="openTicketModal()">
                                    <i class="fas fa-plus-circle"></i> T·∫°o Y√™u c·∫ßu M·ªõi
                                </button>
                                <button class="btn btn-outline-secondary" onclick="loadTickets()">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="card border-0 shadow-sm">
                            <div class="card-body p-0">
                                <div class="table-responsive">
                                    <table class="table table-hover align-middle mb-0" id="tickets-table">
                                        <thead class="table-light">
                                            <tr>
                                                <th class="ps-3">M√£ Ticket</th>
                                                <th>V·ªã tr√≠</th>
                                                <th class="text-center">ƒê√£ tuy·ªÉn / S·ªë l∆∞·ª£ng</th>
                                                <th>Chi ph√≠</th>
                                                <th>D·ª± √°n</th>
                                                <th>Ng√†y b·∫Øt ƒë·∫ßu</th>
                                                <th>Deadline</th>
                                                <th>Tr·∫°ng th√°i</th>
                                                <th class="pe-3">Thao t√°c</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 7. CALENDAR SECTION -->
            <div id="calendar-section" class="section">
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                        <h5 class="mb-0 fw-bold">üìÖ L·ªãch Ph·ªèng V·∫•n Tuy·ªÉn D·ª•ng</h5>
                        <button class="btn btn-sm btn-light"
                            onclick="showSection('calendar-section', document.getElementById('nav-calendar'))">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <div class="card-body p-0">
                        <div class="calendar-container" style="overflow: hidden; border-radius: 0 0 5px 5px;">
                            <iframe
                                src="https://calendar.google.com/calendar/embed?src=b4a01a2123b4134ecadfc6178e645a47acaa5653478befa66693b0859de28602%40group.calendar.google.com&ctz=Asia%2FHo_Chi_Minh"
                                style="border: 0" width="100%" height="600" frameborder="0" scrolling="no">
                            </iframe>
                            <div class="mt-2 text-muted small italic">
                                <i class="fas fa-info-circle"></i> L∆∞u √Ω: N·∫øu kh√¥ng th·∫•y l·ªãch, vui l√≤ng ƒë·∫£m b·∫£o b·∫°n ƒë√£
                                ƒë∆∞·ª£c c·∫•p quy·ªÅn truy c·∫≠p ho·∫∑c l·ªãch ƒë√£ ƒë∆∞·ª£c ƒë·ªÉ ·ªü ch·∫ø ƒë·ªô C√¥ng khai (Public).
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SETTINGS SECTION -->
            <div id="settings" class="section">
                <!-- ... settings content ... -->
                <h3 class="mb-4">C√†i ƒê·∫∑t H·ªá Th·ªëng</h3>
                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-white border-bottom-0">
                        <ul class="nav nav-tabs card-header-tabs" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" data-bs-toggle="tab" href="#tab-departments">V·ªã tr√≠ & Ph√≤ng
                                    ban</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#tab-users">Qu·∫£n l√Ω Users</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#tab-recruiters">Ng∆∞·ªùi ph·ª• tr√°ch</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#tab-email">C·∫•u h√¨nh Email</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#tab-news">Tin T·ª©c</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#tab-sources">Ngu·ªìn ·ª©ng vi√™n</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#tab-company">Th√¥ng tin c√¥ng ty</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" data-bs-toggle="tab" href="#tab-rejection">L√Ω do t·ª´ ch·ªëi</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-danger" data-bs-toggle="tab" href="#tab-cleanup">
                                    <i class="fas fa-broom"></i> T·ªëi ∆∞u Database
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="tab-content">
                            <!-- RECRUITERS TAB -->
                            <div class="tab-pane fade" id="tab-recruiters">
                                <div class="d-flex justify-content-between mb-3">
                                    <h5>Qu·∫£n l√Ω Ng∆∞·ªùi ph·ª• tr√°ch (Recruiters)</h5>
                                    <button class="btn btn-sm btn-info text-white" onclick="promptAddRecruiter()">
                                        <i class="fas fa-user-plus"></i> Th√™m Ng∆∞·ªùi ph·ª• tr√°ch
                                    </button>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-bordered table-hover" id="recruiters-table">
                                        <thead class="table-light">
                                            <tr>
                                                <th style="width: 50px;">ID</th>
                                                <th>H·ªç t√™n</th>
                                                <th>Email</th>
                                                <th>Ch·ª©c v·ª•</th>
                                                <th>Ng√†y tham gia</th>
                                                <th class="text-center">T·ªïng ·ª©ng vi√™n</th>
                                                <th class="text-center" style="width: 120px;">H√†nh ƒë·ªông</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Recruiters will be loaded here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- DEPARTMENTS TAB -->
                            <div class="tab-pane fade show active" id="tab-departments">
                                <div class="d-flex justify-content-between mb-3">
                                    <h5>Qu·∫£n l√Ω Ph√≤ng ban & V·ªã tr√≠ c√¥ng vi·ªác</h5>
                                    <button class="btn btn-sm btn-primary" onclick="promptAddDepartment()">
                                        <i class="fas fa-plus"></i> Th√™m Ph√≤ng ban
                                    </button>
                                </div>
                                <div id="departments-container" class="row g-3">
                                    <!-- Department cards will be injected here -->
                                </div>
                            </div>

                            <!-- USERS TAB -->
                            <div class="tab-pane fade" id="tab-users">
                                <div class="d-flex justify-content-between mb-3">
                                    <h5>Danh s√°ch ng∆∞·ªùi d√πng</h5>
                                    <button class="btn btn-sm btn-success" onclick="openUserModal()">
                                        <i class="fas fa-user-plus"></i> Th√™m User
                                    </button>
                                </div>
                                <table class="table table-bordered" id="users-table">
                                    <thead>
                                        <tr>
                                            <th>Username</th>
                                            <th>H·ªç t√™n</th>
                                            <th>Email</th>
                                            <th>SƒêT</th>
                                            <th>Vai tr√≤</th>
                                            <th>Ph√≤ng ban</th>
                                            <th>H√†nh ƒë·ªông</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>


                            <!-- EMAIL TAB -->
                            <div class="tab-pane fade" id="tab-email">
                                <div class="row">
                                    <div class="col-md-4">
                                        <button class="btn btn-success w-100 mb-2" onclick="addEmailTemplate()">
                                            <i class="fas fa-plus"></i> Th√™m M·∫´u M·ªõi
                                        </button>
                                        <div class="list-group" id="email-template-list">
                                            <!-- Dynamically populated -->
                                        </div>
                                    </div>
                                    <div class="col-md-8">
                                        <form id="email-template-form" style="display:none;">
                                            <h5 id="template-editor-title">Ch·ªânh s·ª≠a m·∫´u</h5>
                                            <input type="hidden" id="tpl-id">
                                            <div class="mb-3">
                                                <label class="form-label">T√™n m·∫´u (Hi·ªÉn th·ªã trong danh s√°ch)</label>
                                                <input type="text" class="form-control" id="tpl-name"
                                                    placeholder="V√≠ d·ª•: Th∆∞ m·ªùi ph·ªèng v·∫•n">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Ti√™u ƒë·ªÅ Email</label>
                                                <input type="text" class="form-control" id="tpl-subject">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">N·ªôi dung</label>
                                                <textarea class="form-control" id="tpl-body" rows="10"></textarea>
                                                <small class="text-muted">C√≥ th·ªÉ d√πng c√°c bi·∫øn: {{name}}, {{position}},
                                                    {{date}}</small>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" class="btn btn-danger"
                                                    onclick="deleteEmailTemplate()">
                                                    <i class="fas fa-trash"></i> X√≥a
                                                </button>
                                                <button type="button" class="btn btn-primary"
                                                    onclick="saveEmailTemplate()">
                                                    <i class="fas fa-save"></i> L∆∞u M·∫´u
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- NEWS TAB -->
                    <div class="tab-pane fade" id="tab-news">
                        <div class="d-flex justify-content-between mb-3">
                            <h5>Qu·∫£n l√Ω Tin T·ª©c</h5>
                            <button class="btn btn-sm btn-primary" onclick="openNewsModal()">
                                <i class="fas fa-plus"></i> Vi·∫øt B√†i M·ªõi
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover" id="news-table">
                                <thead class="table-light">
                                    <tr>
                                        <th style="width: 50px;">ID</th>
                                        <th style="width: 60px;">Img</th>
                                        <th>Ti√™u ƒë·ªÅ</th>
                                        <th>Ng√†y ƒëƒÉng</th>
                                        <th>Tr·∫°ng th√°i</th>
                                        <th class="text-center" style="width: 150px;">H√†nh ƒë·ªông</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="tab-sources">
                        <div class="d-flex justify-content-between mb-3">
                            <h5>Qu·∫£n l√Ω Ngu·ªìn ·ª®ng Vi√™n</h5>
                            <div class="input-group" style="width: 400px;">
                                <input type="text" class="form-control" id="new-source-name"
                                    placeholder="Nh·∫≠p t√™n ngu·ªìn m·ªõi...">
                                <button class="btn btn-success" onclick="addCandidateSource()">
                                    <i class="fas fa-plus"></i> Th√™m
                                </button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover" id="sources-table">
                                <thead class="table-light">
                                    <tr>
                                        <th>T√™n ngu·ªìn</th>
                                        <th class="text-center" style="width: 100px;">H√†nh ƒë·ªông</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <!-- COMPANY INFO TAB -->
                    <div class="tab-pane fade" id="tab-company">
                        <div class="d-flex justify-content-between mb-3 align-items-center">
                            <h5>Th√¥ng tin C√¥ng ty</h5>
                            <button class="btn btn-primary" onclick="saveCompanyInfo()">
                                <i class="fas fa-save me-1"></i> L∆∞u th√¥ng tin
                            </button>
                        </div>
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label class="form-label fw-bold">T√™n c√¥ng ty</label>
                                <input type="text" class="form-control" id="comp-name"
                                    placeholder="V√≠ d·ª•: C√¥ng ty TNHH ABC">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label fw-bold">M√£ s·ªë thu·∫ø</label>
                                <input type="text" class="form-control" id="comp-taxcode" placeholder="0101234567">
                            </div>
                            <div class="col-md-3">
                                <label class="form-label fw-bold">Email c√¥ng ty</label>
                                <input type="email" class="form-control" id="comp-email" placeholder="hr@abc.com">
                            </div>
                            <div class="col-md-2">
                                <label class="form-label fw-bold">S·ªë ƒëi·ªán tho·∫°i</label>
                                <input type="text" class="form-control" id="comp-phone" placeholder="024 1234 5678">
                            </div>
                            <div class="col-md-6">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <label class="form-label fw-bold mb-0">Danh s√°ch ƒê·ªãa ch·ªâ</label>
                                    <button class="btn btn-sm btn-outline-success" onclick="addCompanyAddress()">
                                        <i class="fas fa-plus"></i> Th√™m ƒë·ªãa ch·ªâ
                                    </button>
                                </div>
                                <div id="comp-addresses-container" class="vstack gap-2">
                                    <!-- Dynamic address rows -->
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <label class="form-label fw-bold mb-0">Ng∆∞·ªùi k√Ω h·ª£p ƒë·ªìng / ƒê·∫°i di·ªán</label>
                                    <button class="btn btn-sm btn-outline-success" onclick="addCompanySigner()">
                                        <i class="fas fa-plus"></i> Th√™m ng∆∞·ªùi k√Ω
                                    </button>
                                </div>
                                <div id="comp-signers-container" class="vstack gap-2">
                                    <!-- Dynamic signer rows -->
                                </div>
                            </div>
                            <div class="col-md-12">
                                <label class="form-label fw-bold">Th·ªùi gian l√†m vi·ªác</label>
                                <textarea class="form-control" id="comp-worktime" rows="2"
                                    placeholder="V√≠ d·ª•: Th·ª© 2 - Th·ª© 6: 08:30 - 17:30"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- REJECTION REASONS TAB -->
                    <div class="tab-pane fade" id="tab-rejection">
                        <div class="d-flex justify-content-between mb-3 align-items-center">
                            <h5>Qu·∫£n l√Ω L√Ω do T·ª´ ch·ªëi</h5>
                            <button class="btn btn-primary" onclick="saveRejectionReasons()">
                                <i class="fas fa-save me-1"></i> L∆∞u c·∫•u h√¨nh
                            </button>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card border border-primary-subtle shadow-none">
                                    <div
                                        class="card-header bg-primary-subtle d-flex justify-content-between align-items-center">
                                        <span class="fw-bold text-primary">C√¥ng ty t·ª´ ch·ªëi ·ª©ng vi√™n</span>
                                        <button class="btn btn-xs btn-primary"
                                            onclick="addRejectionReasonRow('Company')">
                                            <i class="fas fa-plus"></i> Th√™m l√Ω do
                                        </button>
                                    </div>
                                    <div class="card-body p-2">
                                        <div id="rejection-company-list" class="vstack gap-2">
                                            <!-- Rows injected here -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card border border-warning-subtle shadow-none">
                                    <div
                                        class="card-header bg-warning-subtle d-flex justify-content-between align-items-center">
                                        <span class="fw-bold text-warning-emphasis">·ª®ng vi√™n t·ª´ ch·ªëi C√¥ng ty</span>
                                        <button class="btn btn-xs btn-warning"
                                            onclick="addRejectionReasonRow('Candidate')">
                                            <i class="fas fa-plus"></i> Th√™m l√Ω do
                                        </button>
                                    </div>
                                    <div class="card-body p-2">
                                        <div id="rejection-candidate-list" class="vstack gap-2">
                                            <!-- Rows injected here -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CLEANUP TAB -->
                    <div class="tab-pane fade" id="tab-cleanup">
                        <div class="alert alert-warning">
                            <h5 class="alert-heading"><i class="fas fa-exclamation-triangle"></i> C√¥ng c·ª• d·ªçn d·∫πp h·ªá
                                th·ªëng</h5>
                            <p>C√¥ng c·ª• n√†y s·∫Ω th·ª±c hi·ªán c√°c t√°c v·ª• sau:</p>
                            <ul>
                                <li>H·ª£p nh·∫•t d·ªØ li·ªáu t·ª´ c√°c c·ªôt tr√πng l·∫∑p (v√≠ d·ª•: <code>Contact_Status</code> v√†o
                                    <code>T√¨nh tr·∫°ng li√™n h·ªá</code>).
                                </li>
                                <li>Chuy·ªÉn ƒë·ªïi d·ªØ li·ªáu t·ª´ c·ªôt t·∫°m <code>Newnote</code> v√†o l·ªãch s·ª≠ ghi ch√∫ ch√≠nh.</li>
                                <li>X√≥a b·ªè c√°c c·ªôt th·ª´a ƒë·ªÉ Google Sheet g·ªçn nh·∫π v√† ho·∫°t ƒë·ªông nhanh h∆°n.</li>
                            </ul>
                            <hr>
                            <p class="mb-0 text-danger"><strong>L∆∞u √Ω:</strong> H√†nh ƒë·ªông n√†y s·∫Ω thay ƒë·ªïi c·∫•u tr√∫c
                                Google Sheet. H√£y ƒë·∫£m b·∫£o kh√¥ng c√≥ ai ƒëang ch·ªânh s·ª≠a tr·ª±c ti·∫øp file Sheet khi th·ª±c hi·ªán.
                            </p>
                        </div>
                        <div class="text-center py-4">
                            <button class="btn btn-danger btn-lg" onclick="runDatabaseCleanup()">
                                <i class="fas fa-magic"></i> B·∫Øt ƒë·∫ßu D·ªçn d·∫πp & T·ªëi ∆∞u ngay
                            </button>
                            <div id="cleanup-loader" class="mt-3" style="display:none;">
                                <div class="spinner-border text-danger" role="status"></div>
                                <p class="mt-2 text-muted">ƒêang x·ª≠ l√Ω d·ªØ li·ªáu, vui l√≤ng ƒë·ª£i...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>

    </div>
    <!-- RECRUITER MODAL (Add/Edit) -->
    <div class="modal fade" id="recruiterModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="recruiterModalLabel">Th√™m Ng∆∞·ªùi ph·ª• tr√°ch</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="recruiter-form">
                        <input type="hidden" id="rec-id">
                        <div class="mb-3">
                            <label class="form-label">H·ªç v√† t√™n <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="rec-name" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="rec-email">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Ch·ª©c v·ª•</label>
                            <input type="text" class="form-control" id="rec-position">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Ng√†y tham gia</label>
                            <input type="date" class="form-control" id="rec-joinDate">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                    <button type="button" class="btn btn-primary" onclick="saveRecruiter()">L∆∞u th√¥ng tin</button>
                </div>
            </div>
        </div>
    </div>
    </div>


    <!-- MODAL: ADD JOB -->
    <div class="modal fade" id="addJobModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">T·∫°o Tin Tuy·ªÉn D·ª•ng</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="add-job-form">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Ti√™u ƒë·ªÅ</label>
                                <input type="text" class="form-control" name="title" id="job-title" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Ph√≤ng ban</label>
                                <select class="form-select" name="department" id="job-dept"
                                    onchange="onJobDepartmentChange()">
                                    <option value="">-- Ch·ªçn Ph√≤ng ban --</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">V·ªã tr√≠ c·ª• th·ªÉ</label>
                                <select class="form-select" name="position" id="job-position">
                                    <option value="">-- Ch·ªçn V·ªã tr√≠ --</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">ƒê·ªãa ƒëi·ªÉm</label>
                                <select class="form-select" name="location" id="job-location">
                                    <option value="">-- Ch·ªçn ƒê·ªãa ƒëi·ªÉm --</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Lo·∫°i h√¨nh</label>
                                <select class="form-select" name="type" id="job-type">
                                    <option value="FullTime">FullTime</option>
                                    <option value="Parttime">Parttime</option>
                                    <option value="Intern">Intern</option>
                                    <option value="Freelance">Freelance</option>
                                    <option value="Kh√°c">Kh√°c</option>
                                </select>
                            </div>
                            <div class="col-md-12">
                                <label class="form-label fw-bold text-primary">Li√™n k·∫øt v·ªõi Y√™u c·∫ßu tuy·ªÉn d·ª•ng
                                    (Ticket)</label>
                                <select class="form-select border-primary" name="ticketId" id="job-ticket-id">
                                    <option value="">-- Ch·ªçn Ticket ƒë√£ t·∫°o --</option>
                                </select>
                                <div class="form-text">G·∫Øn JD v√†o Ticket ƒë·ªÉ AI c√≥ th·ªÉ t·ª± ƒë·ªông ch·∫•m ƒëi·ªÉm ·ª©ng vi√™n thu·ªôc
                                    Ticket n√†y.</div>
                            </div>
                            <div class="col-12">
                                <label class="form-label d-flex justify-content-between align-items-center">
                                    M√¥ t·∫£ c√¥ng vi·ªác
                                    <button type="button"
                                        class="btn btn-sm btn-light text-primary border shadow-sm px-2 py-1"
                                        onclick="handleGenerateJD()">
                                        <i class="fas fa-magic me-1"></i> AI So·∫°n JD
                                    </button>
                                </label>
                                <textarea class="form-control" name="description" id="job-description" rows="8"
                                    placeholder="Nh·∫≠p y√™u c·∫ßu c∆° b·∫£n r·ªìi nh·∫•n AI So·∫°n JD ƒë·ªÉ m·ªü r·ªông..."></textarea>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <button type="button" class="btn btn-primary-custom" onclick="saveJob()">L∆∞u Tin</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: VIEW JOB DETAILS (ADMIN) -->
    <div class="modal fade" id="viewJobModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold" id="view-job-title">Chi Ti·∫øt C√¥ng Vi·ªác</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <strong>Ph√≤ng ban:</strong> <span id="view-job-dept"></span>
                        </div>
                        <div class="col-md-6">
                            <strong>ƒêia ƒëi·ªÉm:</strong> <span id="view-job-loc"></span>
                        </div>
                        <div class="col-md-6">
                            <strong>Lo·∫°i h√¨nh:</strong> <span id="view-job-type"></span>
                        </div>
                        <div class="col-md-6">
                            <strong>Tr·∫°ng th√°i:</strong> <span id="view-job-status"></span>
                        </div>
                        <div class="col-md-6">
                            <strong>Ng√†y t·∫°o:</strong> <span id="view-job-date"></span>
                        </div>
                    </div>
                    <hr>
                    <div class="mb-3">
                        <h6 class="fw-bold">M√¥ t·∫£ c√¥ng vi·ªác:</h6>
                        <div id="view-job-desc" class="p-3 bg-light rounded" style="white-space: pre-wrap;"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <button type="button" class="btn btn-primary-custom" id="btn-edit-from-view">
                        <i class="fas fa-edit"></i> Ch·ªânh s·ª≠a
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: ADD/EDIT USER -->
    <div class="modal fade" id="addUserModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userModalLabel">Th√™m Ng∆∞·ªùi D√πng</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="user-form">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Username <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="u-username" required>
                                <input type="hidden" id="u-mode" value="add">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Password <span class="text-danger"
                                        id="u-password-req">*</span></label>
                                <input type="password" class="form-control" id="u-password">
                                <small class="text-muted" id="u-password-hint" style="display:none">ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng
                                    ƒë·ªïi</small>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">H·ªç t√™n <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="u-fullname" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-control" id="u-email">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
                                <input type="text" class="form-control" id="u-phone">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Vai tr√≤ <span class="text-danger">*</span></label>
                                <select class="form-select" id="u-role">
                                    <option value="User">User</option>
                                    <option value="Viewer">Viewer</option>
                                    <option value="Admin">Admin</option>
                                    <option value="Manager">Manager</option>
                                </select>
                            </div>
                            <div class="col-md-12">
                                <label class="form-label">Ph√≤ng ban</label>
                                <select class="form-select" id="u-department">
                                    <option value="All">All</option>
                                </select>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <button type="button" class="btn btn-primary" onclick="saveUser()">L∆∞u User</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: CANDIDATE DETAILS -->
    <div class="modal fade" id="candidateDetailModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content modal-content-custom">
                <div class="modal-header modal-header-custom">
                    <h5 class="modal-title"><i class="fas fa-id-badge me-2"></i>Chi Ti·∫øt ·ª®ng Vi√™n</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>

                <!-- Tabs Navigation -->
                <ul class="nav nav-tabs nav-tabs-custom" id="candidateTabs" role="tablist">
                    <li class="nav-item">
                        <button class="nav-link active" id="info-tab" data-bs-toggle="tab" data-bs-target="#info-pane"
                            type="button"><i class="fas fa-user-circle me-2"></i>Th√¥ng tin chung</button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" id="career-tab" data-bs-toggle="tab" data-bs-target="#career-pane"
                            type="button"><i class="fas fa-briefcase me-2"></i>H·ªì s∆° tuy·ªÉn d·ª•ng</button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" id="schedule-tab" data-bs-toggle="tab" data-bs-target="#schedule-pane"
                            type="button"><i class="fas fa-calendar-check me-2"></i>L·ªãch h·∫πn & ƒê√°nh gi√°</button>
                    </li>
                    <li class="nav-item">
                        <button class="nav-link" id="notes-tab" data-bs-toggle="tab" data-bs-target="#notes-pane"
                            type="button"><i class="fas fa-sticky-note me-2"></i>Ghi ch√∫</button>
                    </li>
                </ul>

                <div class="modal-body modal-body-custom">
                    <form id="edit-candidate-form">
                        <input type="hidden" id="current-candidate-id">

                        <div class="tab-content" id="candidateTabContent">
                            <!-- Tab 1: Th√¥ng tin chung -->
                            <div class="tab-pane fade show active" id="info-pane">
                                <div class="form-section-title"><i class="fas fa-user"></i> Th√¥ng tin c√° nh√¢n</div>
                                <div class="row g-4">
                                    <div class="col-md-6">
                                        <label class="form-label fw-bold">H·ªç t√™n ·ª©ng vi√™n <span
                                                class="text-danger">*</span></label>
                                        <input type="text" class="form-control form-control-custom" id="detail-name"
                                            required placeholder="Nh·∫≠p ƒë·∫ßy ƒë·ªß h·ªç t√™n">
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label fw-bold">Gi·ªõi t√≠nh</label>
                                        <select class="form-select form-control-custom" id="detail-gender">
                                            <option value="">- Ch·ªçn -</option>
                                            <option>Nam</option>
                                            <option>N·ªØ</option>
                                            <option>Kh√°c</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label fw-bold">NƒÉm sinh</label>
                                        <input type="number" class="form-control form-control-custom" id="detail-dob"
                                            placeholder="YYYY">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label fw-bold">S·ªë ƒëi·ªán tho·∫°i <span
                                                class="text-danger">*</span></label>
                                        <div class="input-icon-wrapper">
                                            <input type="tel" class="form-control form-control-custom" id="detail-phone"
                                                required placeholder="090...">
                                            <i class="fas fa-phone"></i>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label fw-bold">Email <span
                                                class="text-danger">*</span></label>
                                        <div class="input-icon-wrapper">
                                            <input type="email" class="form-control form-control-custom"
                                                id="detail-email" required placeholder="email@example.com">
                                            <i class="fas fa-envelope"></i>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-section-title mt-5"><i class="fas fa-graduation-cap"></i> H·ªçc v·∫•n &
                                    Chuy√™n m√¥n</div>
                                <div class="row g-4">
                                    <div class="col-md-4">
                                        <label class="form-label fw-bold">T√™n tr∆∞·ªùng</label>
                                        <input type="text" class="form-control form-control-custom" id="detail-school"
                                            placeholder="VD: ƒê·∫°i h·ªçc Kinh t·∫ø">
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-bold">Tr√¨nh ƒë·ªô h·ªçc v·∫•n</label>
                                        <select class="form-select form-control-custom" id="detail-education-level">
                                            <option value="">Ch·ªçn tr√¨nh ƒë·ªô</option>
                                            <option>D∆∞·ªõi THPT</option>
                                            <option>THPT</option>
                                            <option>Trung c·∫•p</option>
                                            <option>Cao ƒê·∫≥ng</option>
                                            <option>ƒê·∫°i h·ªçc</option>
                                            <option>Sau ƒë·∫°i h·ªçc</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-bold">Chuy√™n ng√†nh</label>
                                        <input type="text" class="form-control form-control-custom" id="detail-major"
                                            placeholder="VD: Marketing">
                                    </div>
                                    <div class="col-md-12">
                                        <label class="form-label fw-bold">Kinh nghi·ªám l√†m vi·ªác</label>
                                        <textarea class="form-control form-control-custom" id="detail-experience"
                                            rows="2" placeholder="T√≥m t·∫Øt kinh nghi·ªám..."></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- Tab 2: H·ªì s∆° tuy·ªÉn d·ª•ng -->
                            <div class="tab-pane fade" id="career-pane">
                                <div class="form-section-title"><i class="fas fa-bullseye"></i> V·ªã tr√≠ & Tr·∫°ng th√°i
                                </div>
                                <div class="row g-4">
                                    <div class="col-md-6">
                                        <label class="form-label fw-bold">Ph√≤ng ban <span
                                                class="text-danger">*</span></label>
                                        <select class="form-select form-control-custom" id="detail-department"
                                            onchange="populatePositionDropdown()">
                                            <option value="">Ch·ªçn ph√≤ng ban</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label fw-bold">V·ªã tr√≠ ·ª©ng tuy·ªÉn <span
                                                class="text-danger">*</span></label>
                                        <select class="form-select form-control-custom" id="detail-position">
                                            <option>Ch·ªçn v·ªã tr√≠</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label fw-bold">Nh√¢n vi√™n tuy·ªÉn d·ª•ng <span
                                                class="text-danger">*</span></label>
                                        <select class="form-select form-control-custom" id="detail-recruiter">
                                            <option>Ch·ªçn nh√¢n vi√™n</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label fw-bold">Ngu·ªìn ·ª©ng vi√™n</label>
                                        <select class="form-select form-control-custom" id="detail-source">
                                            <option value="">Ch·ªçn ngu·ªìn (ƒêang t·∫£i...)</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-bold">Tr·∫°ng th√°i (Quy tr√¨nh) <span
                                                class="text-danger">*</span></label>
                                        <select class="form-select form-control-custom" id="detail-status"></select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-bold">T√¨nh tr·∫°ng li√™n h·ªá</label>
                                        <select class="form-select form-control-custom" id="detail-contact-status">
                                            <option>M·ªõi ti·∫øp nh·∫≠n</option>
                                            <option>ƒê√£ li√™n l·∫°c</option>
                                            <option>ƒêang trao ƒë·ªïi</option>
                                            <option>Ch·ªù ph·∫£n h·ªìi</option>
                                            <option>Kh√¥ng nghe m√°y</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label fw-bold">Thu·ªôc y√™u c·∫ßu (Ticket)</label>
                                        <select class="form-select form-control-custom" id="detail-ticket-id">
                                            <option value="">-- Kh√¥ng c√≥ --</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label fw-bold">L∆∞∆°ng mong mu·ªën (VNƒê)</label>
                                        <input type="text" class="form-control form-control-custom" id="detail-salary"
                                            placeholder="VD: 15.000.000">
                                    </div>

                                    <!-- Tracking fields (Hire/Reject) -->
                                    <div class="col-md-6 hire-tracking-field" style="display:none;">
                                        <label class="form-label fw-bold text-success">Ng√†y nh·∫≠n vi·ªác</label>
                                        <input type="date" class="form-control form-control-custom border-success"
                                            id="detail-hire-date" readonly>
                                    </div>
                                    <div class="col-md-4 rejection-tracking-field" style="display:none;">
                                        <label class="form-label fw-bold text-danger">ƒê·ªëi t∆∞·ª£ng t·ª´ ch·ªëi</label>
                                        <select class="form-select form-control-custom border-danger"
                                            id="detail-rejection-source">
                                            <option value="">-- Ch·ªçn --</option>
                                            <option value="Company">C√¥ng ty t·ª´ ch·ªëi</option>
                                            <option value="Candidate">·ª®ng vi√™n t·ª´ ch·ªëi</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4 rejection-tracking-field" style="display:none;"
                                        id="rejection-type-container">
                                        <label class="form-label fw-bold text-danger">Lo·∫°i t·ª´ ch·ªëi</label>
                                        <select class="form-select form-control-custom border-danger"
                                            id="detail-rejection-type"></select>
                                    </div>
                                    <div class="col-md-4 rejection-tracking-field" style="display:none;"
                                        id="rejection-reason-container">
                                        <label class="form-label fw-bold text-danger">L√Ω do chi ti·∫øt</label>
                                        <input type="text" class="form-control form-control-custom border-danger"
                                            id="detail-rejection-reason">
                                    </div>
                                </div>

                                <div class="form-section-title mt-5"><i class="fas fa-file-pdf"></i> Qu·∫£n l√Ω H·ªì s∆° CV
                                </div>
                                <div class="bg-light p-4 rounded-4 border border-dashed">
                                    <div class="row align-items-center g-3">
                                        <div class="col-md-8">
                                            <input type="text" class="form-control form-control-custom"
                                                id="detail-cv-link" placeholder="Nh·∫≠p link CV ho·∫∑c upload file...">
                                        </div>
                                        <div class="col-md-4 d-flex gap-2">
                                            <button class="btn btn-outline-info flex-grow-1" type="button"
                                                id="btn-view-cv-detail"><i class="fas fa-eye"></i> Xem</button>
                                            <button class="btn btn-outline-warning flex-grow-1" type="button"
                                                id="btn-ai-parse" onclick="handleAIParsing()"><i
                                                    class="fas fa-robot"></i> AI Parse</button>
                                        </div>
                                        <div class="col-12 mt-2">
                                            <input type="file" class="d-none" id="detail-cv-file"
                                                accept=".pdf,.doc,.docx,.jpg,.png">
                                            <button class="btn btn-primary w-100" type="button"
                                                onclick="document.getElementById('detail-cv-file').click()"><i
                                                    class="fas fa-upload me-2"></i> T·∫£i h·ªì s∆° l√™n h·ªá th·ªëng</button>
                                        </div>
                                    </div>
                                    <div id="ai-loading" class="text-info mt-3" style="display:none;">
                                        <small><i class="fas fa-spinner fa-spin me-1"></i> H·ªá th·ªëng AI ƒëang ph√¢n t√≠ch h·ªì
                                            s∆°, vui l√≤ng ch·ªù gi√¢y l√°t...</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Tab 3: L·ªãch h·∫πn & ƒê√°nh gi√° -->
                            <div class="tab-pane fade" id="schedule-pane">
                                <div class="row g-4">
                                    <div class="col-md-6 border-end">
                                        <div class="form-section-title"><i class="fas fa-clock"></i> Thi·∫øt l·∫≠p L·ªãch
                                            ph·ªèng v·∫•n</div>
                                        <div class="card border-0 bg-light p-4 rounded-4">
                                            <div class="mb-3">
                                                <label class="form-label small fw-bold">Th·ªùi gian b·∫Øt ƒë·∫ßu</label>
                                                <input type="datetime-local" class="form-control form-control-custom"
                                                    id="interview-start">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label small fw-bold">Th·ªùi gian k·∫øt th√∫c</label>
                                                <input type="datetime-local" class="form-control form-control-custom"
                                                    id="interview-end">
                                            </div>
                                            <div class="mb-4">
                                                <label class="form-label small fw-bold">Email Manager ph·ª• tr√°ch</label>
                                                <input type="email" class="form-control form-control-custom"
                                                    id="interview-manager-email" placeholder="manager@company.com">
                                            </div>
                                            <button class="btn btn-primary btn-action-lg w-100 justify-content-center"
                                                type="button" onclick="handleCreateSchedule()">
                                                <i class="fas fa-paper-plane"></i> G·ª≠i Mail M·ªùi Ph·ªèng V·∫•n
                                            </button>
                                        </div>
                                    </div>
                                    <div class="col-md-6 px-lg-5">
                                        <div class="form-section-title"><i class="fas fa-star"></i> K·∫øt qu·∫£ ƒê√°nh gi√°
                                        </div>
                                        <div class="text-center py-5">
                                            <i class="fas fa-clipboard-list fa-4x text-light mb-3"></i>
                                            <p class="text-muted">B·∫°n c√≥ th·ªÉ t·∫°o y√™u c·∫ßu ƒë√°nh gi√° cho Manager sau khi
                                                bu·ªïi ph·ªèng v·∫•n k·∫øt th√∫c.</p>
                                            <button type="button" class="btn btn-outline-success btn-action-lg mx-auto"
                                                id="btn-request-eval" onclick="openCreateEvaluationModal()">
                                                <i class="fas fa-plus-circle"></i> T·∫°o y√™u c·∫ßu ƒê√°nh gi√°
                                            </button>
                                        </div>
                                    </div>
                                    <!-- AI MATCHING SECTION -->
                                    <div class="col-12">
                                        <div class="mt-4 p-4 border rounded-4 bg-light shadow-sm" id="ai-match-section">
                                            <div class="d-flex justify-content-between align-items-center mb-3">
                                                <h6 class="text-primary mb-0"><i class="fas fa-brain me-2"></i>Ph√¢n t√≠ch
                                                    ƒë·ªô ph√π h·ª£p (AI Matching)</h6>
                                                <button type="button" class="btn btn-sm btn-primary px-3 rounded-pill"
                                                    onclick="startAiMatching()">
                                                    <i class="fas fa-play me-1"></i> Ph√¢n t√≠ch ngay
                                                </button>
                                            </div>

                                            <div class="d-flex align-items-center mb-3">
                                                <div class="progress flex-grow-1 rounded-pill" style="height: 12px;">
                                                    <div id="ai-score-bar"
                                                        class="progress-bar progress-bar-striped progress-bar-animated"
                                                        style="width: 0%"></div>
                                                </div>
                                                <span id="ai-score-text"
                                                    class="ms-3 fw-bold fs-5 text-primary">0%</span>
                                            </div>

                                            <div class="row g-3 small">
                                                <div class="col-md-6">
                                                    <div
                                                        class="p-3 bg-white rounded-3 border-start border-success border-4 h-100">
                                                        <strong class="text-success d-block mb-2"><i
                                                                class="fas fa-check-circle me-1"></i> ƒêi·ªÉm m·∫°nh</strong>
                                                        <ul id="ai-pros" class="mb-0 ps-3"></ul>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div
                                                        class="p-3 bg-white rounded-3 border-start border-danger border-4 h-100">
                                                        <strong class="text-danger d-block mb-2"><i
                                                                class="fas fa-times-circle me-1"></i> ƒêi·ªÉm y·∫øu</strong>
                                                        <ul id="ai-cons" class="mb-0 ps-3"></ul>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mt-3 p-3 bg-white rounded-3 border-start border-info border-4">
                                                <p id="ai-summary" class="mb-0 text-muted fst-italic">Ch∆∞a c√≥ d·ªØ li·ªáu
                                                    ph√¢n t√≠ch.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Tab 4: Ghi ch√∫ -->
                            <div class="tab-pane fade" id="notes-pane">
                                <div class="form-section-title"><i class="fas fa-history"></i> L·ªãch s·ª≠ ho·∫°t ƒë·ªông</div>
                                <div id="detail-notes-history" class="mb-4">
                                    <!-- Notes list will be rendered here -->
                                </div>
                                <div class="form-section-title mt-4"><i class="fas fa-comment-medical"></i> Th√™m ghi ch√∫
                                    m·ªõi</div>
                                <textarea class="form-control form-control-custom" id="detail-new-note" rows="3"
                                    placeholder="Nh·∫≠p ghi ch√∫ quan tr·ªçng t·∫°i ƒë√¢y... (D√πng @ ƒë·ªÉ nh·∫Øc t√™n ƒë·ªìng nghi·ªáp)"></textarea>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="modal-footer modal-footer-custom">
                    <button type="button" class="btn btn-light px-4" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <div class="ms-auto d-flex gap-2">
                        <button type="button" class="btn btn-info text-white px-4 fw-bold"
                            onclick="exportCandidateToPDF()">
                            <i class="fas fa-file-pdf me-2"></i> Xu·∫•t Profile
                        </button>
                        <button type="button" class="btn btn-primary px-5 fw-bold" id="btn-save-candidate"
                            onclick="saveCandidate()">
                            <i class="fas fa-save me-2"></i> L∆∞u H·ªì S∆°
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: DOCUMENT HUB (AUTO GENERATE PDF) -->
    <div class="modal fade" id="documentHubModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-dark text-white">
                    <h5 class="modal-title"><i class="fas fa-file-signature"></i> Trung t√¢m T·∫°o VƒÉn b·∫£n</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label fw-bold">Ch·ªçn lo·∫°i vƒÉn b·∫£n c·∫ßn t·∫°o</label>
                        <select class="form-select" id="doc-template-select" onchange="toggleDocExtraFields()">
                            <option value="TemplateOffer">Th∆∞ m·ªùi nh·∫≠n vi·ªác (Offer Letter)</option>
                            <option value="TemplateContractProbation">H·ª£p ƒë·ªìng th·ª≠ vi·ªác (Probation)</option>
                            <option value="TemplateContractOfficial">H·ª£p ƒë·ªìng lao ƒë·ªông (Official)</option>
                            <option value="TemplateCandidateProfile">H·ªì s∆° kh·∫£o s√°t (Profile Summary)</option>
                        </select>
                    </div>

                    <!-- Extra fields for documents -->
                    <div id="doc-extra-fields" class="card p-3 bg-light border-0">
                        <h6 class="fw-bold mb-3 border-bottom pb-2">Th√¥ng tin b·ªï sung</h6>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">S·ªë vƒÉn b·∫£n (Ghi ƒë√®)</label>
                                <input type="text" class="form-control" id="doc-number-override"
                                    placeholder="V√≠ d·ª•: 123/2024">
                            </div>
                            <div class="col-md-6" id="field-salary">
                                <label class="form-label">M·ª©c l∆∞∆°ng (VNƒê)</label>
                                <input type="text" class="form-control" id="doc-salary" placeholder="V√≠ d·ª•: 15,000,000">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">L∆∞∆°ng b·∫±ng ch·ªØ (ƒê·ªìng)</label>
                                <input type="text" class="form-control" id="doc-salary-words"
                                    placeholder="V√≠ d·ª•: M∆∞·ªùi lƒÉm tri·ªáu">
                            </div>
                            <div class="col-md-6" id="field-start-date">
                                <label class="form-label">Ng√†y b·∫Øt ƒë·∫ßu</label>
                                <input type="date" class="form-control" id="doc-start-date">
                            </div>
                            <div class="col-md-6" id="field-probation-end">
                                <label class="form-label">Ng√†y k·∫øt th√∫c th·ª≠ vi·ªác</label>
                                <input type="date" class="form-control" id="doc-probation-end">
                            </div>
                            <div class="col-md-6" id="field-deadline">
                                <label class="form-label">H·∫°n ph·∫£n h·ªìi</label>
                                <input type="date" class="form-control" id="doc-deadline">
                            </div>
                            <div class="col-md-6" id="field-contract-period">
                                <label class="form-label">Th·ªùi h·∫°n h·ª£p ƒë·ªìng</label>
                                <input type="text" class="form-control" id="doc-contract-period"
                                    placeholder="V√≠ d·ª•: 12 th√°ng">
                            </div>
                            <div class="col-md-6" id="field-issuance-location">
                                <label class="form-label">ƒê·ªãa ƒëi·ªÉm l·∫≠p vƒÉn b·∫£n</label>
                                <input type="text" class="form-control" id="doc-issuance-location"
                                    placeholder="V√≠ d·ª•: H√† N·ªôi">
                            </div>
                            <div class="col-12" id="field-manager">
                                <label class="form-label">Ng∆∞·ªùi b√°o c√°o tr·ª±c ti·∫øp</label>
                                <input type="text" class="form-control" id="doc-manager" placeholder="T√™n v√† ch·ª©c v·ª•">
                            </div>
                            <div class="col-12">
                                <label class="form-label">ƒê·ªãa ƒëi·ªÉm l√†m vi·ªác</label>
                                <select class="form-select" id="doc-location-select">
                                    <option value="">-- Ch·ªçn ƒë·ªãa ƒëi·ªÉm --</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label class="form-label">Ng∆∞·ªùi k√Ω / ƒê·∫°i di·ªán</label>
                                <select class="form-select" id="doc-signer-select">
                                    <option value="">-- Ch·ªçn ng∆∞·ªùi k√Ω --</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div id="doc-loading" class="text-center mt-3" style="display:none;">
                        <div class="spinner-border text-primary" role="status"></div>
                        <p class="mt-2 text-muted">ƒêang x·ª≠ l√Ω PDF, vui l√≤ng ƒë·ª£i...</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <button type="button" class="btn btn-success" id="btn-generate-doc" onclick="generateDocument()">
                        <i class="fas fa-magic"></i> T·∫°o & Xu·∫•t File PDF
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: SEND EMAIL (SMART GMAIL STYLE) -->
    <div class="modal fade" id="sendEmailModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content shadow-lg border-0">
                <div class="modal-header bg-dark text-white py-2">
                    <h6 class="modal-title"><i class="fas fa-envelope me-2"></i>Th∆∞ m·ªõi</h6>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-0">
                    <form id="send-email-form">
                        <input type="hidden" id="email-candidate-id">

                        <!-- Recipients -->
                        <div class="border-bottom px-3 py-2">
                            <div class="d-flex align-items-center mb-1">
                                <span class="text-muted me-2" style="width: 40px;">ƒê·∫øn</span>
                                <input type="text" class="form-control border-0 p-0 shadow-none" id="email-to" readonly
                                    style="background: transparent;">
                                <div class="ms-auto">
                                    <small class="text-primary cursor-pointer me-2"
                                        onclick="toggleEmailField('cc')">Cc</small>
                                    <small class="text-primary cursor-pointer"
                                        onclick="toggleEmailField('bcc')">Bcc</small>
                                </div>
                            </div>

                            <div id="email-cc-container" style="display: none;"
                                class="d-flex align-items-baseline mb-1">
                                <span class="text-muted me-2" style="width: 40px;">Cc</span>
                                <div class="recipient-tags-input flex-grow-1 border-0 p-0 shadow-none"
                                    id="email-cc-tags">
                                    <input type="text" class="border-0 shadow-none flex-grow-1" id="email-cc-input"
                                        placeholder="Th√™m CC..." onkeydown="handleRecipientInput(event, 'cc')">
                                </div>
                            </div>

                            <div id="email-bcc-container" style="display: none;"
                                class="d-flex align-items-baseline mb-1">
                                <span class="text-muted me-2" style="width: 40px;">Bcc</span>
                                <div class="recipient-tags-input flex-grow-1 border-0 p-0 shadow-none"
                                    id="email-bcc-tags">
                                    <input type="text" class="border-0 shadow-none flex-grow-1" id="email-bcc-input"
                                        placeholder="Th√™m BCC..." onkeydown="handleRecipientInput(event, 'bcc')">
                                </div>
                            </div>
                        </div>

                        <!-- Template & Subject -->
                        <div class="border-bottom px-3 py-2 d-flex align-items-center">
                            <select class="form-select form-select-sm border-0 border-end shadow-none me-2"
                                id="email-template-select" style="width: 150px; background: transparent;"
                                onchange="loadTemplateContent(this.value)">
                                <option value="">-- M·∫´u --</option>
                            </select>
                            <input type="text" class="form-control border-0 p-0 shadow-none" id="email-subject"
                                placeholder="Ti√™u ƒë·ªÅ">
                        </div>

                        <!-- Rich Text Editor -->
                        <div class="email-editor-container border-0">
                            <div id="email-body-quill"></div>
                        </div>

                        <!-- Attachments Preview -->
                        <div id="email-attachments-list" class="px-3 py-2 border-top bg-light" style="display: none;">
                            <!-- Badges will appear here -->
                        </div>
                    </form>
                </div>
                <!-- Bottom Toolbar -->
                <div class="modal-footer justify-content-start border-top-0 px-3 py-2">
                    <div class="btn-group dropup">
                        <button type="button" class="btn btn-primary px-4" id="btn-send-email"
                            onclick="sendEmail()">G·ª≠i</button>
                        <button type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            <span class="visually-hidden">Th√™m t√πy ch·ªçn</span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="openScheduleSendModal()"><i
                                        class="far fa-clock me-2"></i>H·∫πn gi·ªù g·ª≠i</a></li>
                        </ul>
                    </div>

                    <button class="btn btn-light btn-sm text-secondary p-2 ms-2" title="ƒê√≠nh k√®m t·ªáp"
                        onclick="document.getElementById('email-attachment-input').click()">
                        <i class="fas fa-paperclip"></i>
                    </button>
                    <input type="file" id="email-attachment-input" multiple style="display: none;"
                        onchange="handleFileAttachments(this)">

                    <button class="btn btn-light btn-sm text-secondary p-2" title="Ch√®n li√™n k·∫øt"
                        onclick="quill.theme.tooltip.edit()">
                        <i class="fas fa-link"></i>
                    </button>

                    <button class="btn btn-light btn-sm text-secondary p-2" title="B·∫£n nh√°p" onclick="saveDraft()">
                        <i class="far fa-save"></i>
                    </button>

                    <div class="ms-auto">
                        <small class="text-muted" id="email-draft-status">ƒê√£ l∆∞u t·ª± ƒë·ªông l√∫c 00:00</small>
                        <button class="btn btn-light btn-sm text-secondary p-2 ms-2" title="X√≥a th∆∞ nh√°p"
                            onclick="clearDraft()">
                            <i class="far fa-trash-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- JAVASCRIPT -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Quill.js JS -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>

    <?!= include('js'); ?>
    <!-- MODAL: NEWS (Add/Edit) -->
    <div class="modal fade" id="newsModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title" id="newsModalLabel">Qu·∫£n l√Ω Tin T·ª©c</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="news-form">
                        <input type="hidden" id="news-id">
                        <div class="mb-3">
                            <label class="form-label fw-bold">Ti√™u ƒë·ªÅ b√†i vi·∫øt <span
                                    class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="news-title" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">H√¨nh ·∫£nh b√†i vi·∫øt</label>
                            <input type="file" class="form-control" id="news-image-db" multiple accept="image/*"
                                onchange="previewNewsFlagNodes()">
                            <input type="hidden" id="news-image">
                            <!-- To store existing URLs or uploaded URLs -->
                            <div id="news-image-preview" class="d-flex flex-wrap gap-2 mt-2">
                            </div>
                            <small class="text-muted">ƒêang d√πng ch·∫ø ƒë·ªô: Upload ·∫£nh tr·ª±c ti·∫øp l√™n
                                Server.</small>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">N·ªôi dung</label>
                            <textarea class="form-control" id="news-content" rows="8"
                                placeholder="N·ªôi dung b√†i vi·∫øt..."></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Tr·∫°ng th√°i</label>
                            <select class="form-select" id="news-status">
                                <option value="Published">ƒê√£ ƒëƒÉng (Published)</option>
                                <option value="Draft">B·∫£n nh√°p (Draft)</option>
                                <option value="Hidden">·∫®n (Hidden)</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <button type="button" class="btn btn-primary" onclick="saveNews()">
                        <i class="fas fa-save"></i> L∆∞u B√†i Vi·∫øt
                    </button>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>
    <!-- ============================================ -->
    <!-- MODAL: BULK UPLOAD CANDIDATES -->
    <!-- ============================================ -->
    <div class="modal fade" id="bulkUploadModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title"><i class="fas fa-file-upload me-2"></i>T·∫£i H·ªì S∆° H√†ng Lo·∫°t</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- NAV TABS -->
                    <ul class="nav nav-tabs mb-3" id="bulkUploadTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="tab-cvs-btn" data-bs-toggle="tab"
                                data-bs-target="#tab-cvs" type="button" role="tab"><i class="fas fa-file-pdf me-1"></i>
                                File CV</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="tab-sheet-btn" data-bs-toggle="tab" data-bs-target="#tab-sheet"
                                type="button" role="tab"><i class="fas fa-table me-1"></i> Excel / Sheet</button>
                        </li>
                    </ul>

                    <div class="tab-content" id="bulkUploadTabsContent">

                        <!-- TAB 1: UPLOAD CV FILES -->
                        <div class="tab-pane fade show active" id="tab-cvs" role="tabpanel">
                            <form id="bulk-upload-form">
                                <div class="mb-3">
                                    <label class="form-label">Ch·ªçn h·ªì s∆° (PDF, Docx)</label>
                                    <input type="file" class="form-control" id="bulk-files" multiple
                                        accept=".pdf,.doc,.docx">
                                    <div class="form-text">C√≥ th·ªÉ ch·ªçn nhi·ªÅu file c√πng l√∫c (T·ªëi ƒëa 5
                                        file/l·∫ßn).</div>
                                </div>
                            </form>
                        </div>

                        <!-- TAB 2: IMPORT EXCEL/SHEET -->
                        <div class="tab-pane fade" id="tab-sheet" role="tabpanel">
                            <form id="sheet-import-form">
                                <div class="mb-3">
                                    <label class="form-label">Ch·ªçn ph∆∞∆°ng th·ª©c nh·∫≠p:</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="importType" id="import-url"
                                            value="URL" checked onchange="toggleImportInputs()">
                                        <label class="form-check-label" for="import-url">
                                            Link Google Sheet
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="importType" id="import-file"
                                            value="FILE" onchange="toggleImportInputs()">
                                        <label class="form-check-label" for="import-file">
                                            File Excel (.xlsx)
                                        </label>
                                    </div>
                                </div>

                                <div class="mb-3" id="input-url-container">
                                    <label class="form-label">D√°n Link Google Sheet</label>
                                    <input type="text" class="form-control" id="sheet-url"
                                        placeholder="https://docs.google.com/spreadsheets/d/...">
                                    <div class="form-text text-warning"><i class="fas fa-exclamation-triangle"></i> H√£y
                                        ch·∫Øc ch·∫Øn file Google Sheet ƒë√£ ƒë∆∞·ª£c chia s·∫ª quy·ªÅn truy c·∫≠p (Anyone
                                        with link
                                        ho·∫∑c share cho email s·ªü h·ªØu script).</div>
                                </div>

                                <div class="mb-3 d-none" id="input-file-container">
                                    <label class="form-label">Ch·ªçn file Excel ho·∫∑c CSV</label>
                                    <input type="file" class="form-control" id="sheet-file" accept=".xlsx, .csv">
                                    <div class="form-text">Khuy√™n d√πng file <b>.csv</b> n·∫øu import Excel b·ªã
                                        l·ªói.</div>
                                </div>
                            </form>
                        </div>

                    </div>

                    <hr>
                    <!-- COMMON SETTINGS -->
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Ngu·ªìn ·ª©ng vi√™n</label>
                            <select class="form-select" id="bulk-source">
                                <option value="Bulk Import">Bulk Import</option>
                                <option value="Website">Website</option>
                                <option value="LinkedIn">LinkedIn</option>
                                <option value="Referral">Referral</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Giai ƒëo·∫°n</label>
                            <select class="form-select" id="bulk-stage">
                                <option value="·ª®ng tuy·ªÉn">·ª®ng tuy·ªÉn</option>
                                <option value="New">M·ªõi</option>
                            </select>
                        </div>
                    </div>

                    <div id="bulk-upload-progress" class="d-none">
                        <hr>
                        <h6>Ti·∫øn ƒë·ªô:</h6>
                        <div class="progress mb-2">
                            <div id="bulk-progress-bar"
                                class="progress-bar progress-bar-striped progress-bar-animated bg-success"
                                role="progressbar" style="width: 0%"></div>
                        </div>
                        <div id="bulk-status-text" class="small text-muted">ƒêang x·ª≠ l√Ω...</div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <button type="button" class="btn btn-primary" onclick="handleImportAction()">
                        <i class="fas fa-cloud-upload-alt me-1"></i> B·∫Øt ƒë·∫ßu Import
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: CV PREVIEW -->
    <div class="modal fade" id="cvPreviewModal" tabindex="-1">
        <div class="modal-dialog modal-xl modal-dialog-centered" style="height: 90vh;">
            <div class="modal-content h-100">
                <div class="modal-header bg-dark text-white py-2">
                    <h5 class="modal-title fs-6"><i class="fas fa-file-pdf me-2"></i>Xem CV ·ª®ng Vi√™n</h5>
                    <div class="ms-auto">
                        <a href="#" id="cv-download-btn" target="_blank" class="btn btn-sm btn-light me-2"><i
                                class="fas fa-external-link-alt"></i> M·ªü
                            tab m·ªõi</a>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                    </div>
                </div>
                <div class="modal-body p-0" style="background: #e9ecef;">
                    <iframe id="cv-iframe" src="" style="width: 100%; height: 100%; border: none;"></iframe>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL: REQUEST EVALUATION (Legacy/Contextual) -->
    <div class="modal fade" id="requestEvaluationModal" tabindex="-1" data-bs-backdrop="static"
        data-bs-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title">Y√™u c·∫ßu ƒê√°nh gi√°</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="req-eval-candidate-id">
                    <div class="mb-3">
                        <label class="form-label">Ng∆∞·ªùi ƒë√°nh gi√° (Manager) *</label>
                        <select class="form-select" id="req-eval-manager">
                            <option value="">Ch·ªçn Manager</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                    <button type="button" class="btn btn-primary" onclick="submitEvaluationRequest()">
                        <i class="fas fa-paper-plane"></i> G·ª≠i Y√™u c·∫ßu
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: CREATE EVALUATION (Direct) -->
    <div class="modal fade" id="createEvaluationModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title"><i class="fas fa-plus-circle"></i> T·∫°o Phi·∫øu ƒê√°nh gi√° M·ªõi</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label fw-bold">Ch·ªçn ·ª®ng vi√™n *</label>
                        <select class="form-select" id="create-eval-candidate">
                            <option value="">-- T√¨m ki·∫øm ·ª©ng vi√™n --</option>
                        </select>
                        <small class="text-muted">Ch·ªâ hi·ªÉn th·ªã ·ª©ng vi√™n ƒëang ·ªü v√≤ng Ph·ªèng v·∫•n.</small>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Ng∆∞·ªùi ƒë√°nh gi√° (Manager) *</label>
                        <div id="manager-select-container">
                            <div class="input-group mb-2 manager-row">
                                <select class="form-select manager-select">
                                    <option value="">-- Ch·ªçn Manager --</option>
                                </select>
                                <button class="btn btn-outline-danger remove-manager" type="button"
                                    style="display:none;"><i class="fas fa-times"></i></button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-sm btn-outline-primary" id="btn-add-manager"
                            onclick="addManagerInput()">
                            <i class="fas fa-user-plus"></i> Th√™m ng∆∞·ªùi ƒë√°nh gi√° (T·ªëi ƒëa 3)
                        </button>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Ti√™u ch√≠ ƒê√°nh gi√°</label>
                        <div id="criteria-container">
                            <!-- Default criteria will be added here via JS -->
                        </div>
                        <button type="button" class="btn btn-sm btn-outline-info" onclick="addCriteriaInput()">
                            <i class="fas fa-plus"></i> Th√™m ti√™u ch√≠ kh√°c
                        </button>
                    </div>

                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="create-eval-now">
                        <label class="form-check-label" for="create-eval-now">
                            T√¥i mu·ªën ƒë√°nh gi√° ngay b√¢y gi·ªù
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <button type="button" class="btn btn-primary" onclick="submitCreateEvaluation()">
                        <i class="fas fa-check"></i> T·∫°o Phi·∫øu
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: DO EVALUATION (For Manager) -->
    <div class="modal fade" id="doEvaluationModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title fw-bold"><i class="fas fa-pen-nib"></i> ƒê√°nh gi√° Ph·ªèng v·∫•n</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="do-eval-id">
                    <div class="alert alert-light border shadow-sm">
                        <div class="row">
                            <div class="col-md-6">
                                <strong><i class="fas fa-user-graduate"></i> ·ª®ng vi√™n:</strong> <span id="do-eval-cname"
                                    class="fw-bold text-primary"></span> <br>
                                <strong><i class="fas fa-briefcase"></i> V·ªã tr√≠:</strong> <span
                                    id="do-eval-position"></span>
                            </div>
                            <div class="col-md-6 border-start">
                                <strong><i class="fas fa-user-tie"></i> Ng∆∞·ªùi ƒë√°nh gi√°:</strong> <span
                                    id="do-eval-mgr-name"></span> <br>
                                <strong><i class="fas fa-id-card"></i> Ch·ª©c v·ª•:</strong> <span
                                    id="do-eval-mgr-pos"></span> (<span id="do-eval-mgr-dept"></span>)
                            </div>
                        </div>
                    </div>

                    <form id="evaluation-form">
                        <div id="dynamic-scores-container" class="row mb-3">
                            <!-- Scores will be rendered here (1-10 scale) -->
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label fw-bold"><i class="fas fa-calculator text-danger"></i> T·ªïng
                                    ƒëi·ªÉm trung b√¨nh</label>
                                <div class="input-group">
                                    <input type="text" class="form-control fw-bold text-danger bg-light"
                                        id="eval-total-score" readonly value="0">
                                    <span class="input-group-text">/ 10</span>
                                </div>
                                <small class="text-muted" id="eval-score-label">Ch∆∞a ƒë√°nh gi√°</small>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold"><i class="fas fa-hand-holding-usd text-success"></i>
                                    M·ª©c l∆∞∆°ng ƒë·ªÅ xu·∫•t</label>
                                <input type="text" class="form-control" id="eval-proposed-salary"
                                    placeholder="VD: 15.000.000 VNƒê">
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">Nh·∫≠n x√©t chi ti·∫øt <span
                                    class="text-danger">*</span></label>
                            <textarea class="form-control" id="eval-comment" rows="4"
                                placeholder="Nh·∫≠p nh·∫≠n x√©t v·ªÅ ƒëi·ªÉm m·∫°nh, ƒëi·ªÉm y·∫øu..."></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">K·∫øt qu·∫£ cu·ªëi c√πng <span
                                    class="text-danger">*</span></label>
                            <div class="btn-group w-100" role="group">
                                <input type="radio" class="btn-check" name="eval-result" id="res-pass" value="Pass"
                                    autocomplete="off">
                                <label class="btn btn-outline-success" for="res-pass">PASS (ƒê·∫°t)</label>

                                <input type="radio" class="btn-check" name="eval-result" id="res-consider"
                                    value="Consider" autocomplete="off">
                                <label class="btn btn-outline-warning" for="res-consider">CONSIDER (C√¢n
                                    nh·∫Øc)</label>

                                <input type="radio" class="btn-check" name="eval-result" id="res-reject" value="Reject"
                                    autocomplete="off">
                                <label class="btn btn-outline-danger" for="res-reject">REJECT (Lo·∫°i)</label>
                            </div>
                        </div>

                        <div class="alert alert-info border-info mt-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="eval-signature-confirm">
                                <label class="form-check-label fw-bold" for="eval-signature-confirm">
                                    X√°c nh·∫≠n ho√†n th√†nh v√† k√Ω ƒëi·ªán t·ª≠ phi·∫øu ƒë√°nh gi√° n√†y
                                </label>
                                <div class="small text-muted">T√¥i x√°c nh·∫≠n c√°c th√¥ng tin ƒë√°nh gi√° tr√™n l√†
                                    ch√≠nh x√°c v√†
                                    ch·ªãu tr√°ch nhi·ªám v·ªÅ n·ªôi dung n√†y.</div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <button type="button" class="btn btn-success" onclick="submitEvaluation()">
                        <i class="fas fa-check-circle"></i> Ho√†n th√†nh ƒê√°nh gi√°
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL: ADD/EDIT PROJECT -->
    <div class="modal fade" id="projectModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title fw-bold"><i class="fas fa-project-diagram me-2"></i>Thi·∫øt l·∫≠p D·ª±
                        √°n Tuy·ªÉn
                        d·ª•ng</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <!-- Project Statistics (Top Row) -->
                    <div id="proj-stats-container" class="mb-4" style="display:none;">
                        <div class="row g-3">
                            <div class="col-md-3">
                                <div class="card border-0 shadow-sm text-center p-3 h-100"
                                    style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);">
                                    <div class="text-primary fw-bold small text-uppercase mb-1"
                                        style="font-size: 0.75rem;">S·ªë l∆∞·ª£ng Ticket</div>
                                    <div class="h3 mb-0 fw-bold text-primary" id="stat-proj-tickets">0</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card border-0 shadow-sm text-center p-3 h-100"
                                    style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);">
                                    <div class="text-warning fw-bold small text-uppercase mb-1"
                                        style="font-size: 0.75rem;">T·ªïng SL C·∫ßn</div>
                                    <div class="h3 mb-0 fw-bold text-warning" id="stat-proj-requested">0
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card border-0 shadow-sm text-center p-3 h-100"
                                    style="background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);">
                                    <div class="text-success fw-bold small text-uppercase mb-1"
                                        style="font-size: 0.75rem;">T·ªïng ƒê√£ tuy·ªÉn</div>
                                    <div class="h3 mb-0 fw-bold text-success" id="stat-proj-hired">0</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card border-0 shadow-sm text-center p-3 h-100"
                                    style="background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);">
                                    <div class="text-secondary fw-bold small text-uppercase mb-1"
                                        style="font-size: 0.75rem;">T·ªïng Chi ph√≠</div>
                                    <div class="h4 mb-0 fw-bold text-secondary" id="stat-proj-cost">0 ƒë
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tickets List (Moved Up) -->
                    <div id="proj-tickets-list-container" class="mb-4" style="display:none;">
                        <label class="form-label fw-bold mb-2 text-primary"><i class="fas fa-list-ul me-2"></i>Chi ti·∫øt
                            c√°c Ticket trong D·ª± √°n</label>
                        <div class="table-responsive border rounded-3 bg-white shadow-sm">
                            <table class="table table-sm table-hover mb-0 align-middle" style="font-size: 0.85rem;">
                                <thead style="background-color: #f8f9fa;">
                                    <tr>
                                        <th class="ps-3 py-2">V·ªã tr√≠</th>
                                        <th class="text-center">S·ªë l∆∞·ª£ng</th>
                                        <th class="text-center">ƒê√£ tuy·ªÉn</th>
                                        <th>Deadline</th>
                                        <th>Chi ph√≠</th>
                                        <th>Tr·∫°ng th√°i</th>
                                    </tr>
                                </thead>
                                <tbody id="proj-tickets-tbody">
                                    <!-- Rows injected here -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <form id="project-form">
                        <div class="row">
                            <div class="col-md-8 mb-3">
                                <label class="form-label fw-bold">T√™n D·ª± √°n <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="proj-name" required
                                    placeholder="VD: Tuy·ªÉn d·ª•ng Kh·ªëi C√¥ng ngh·ªá Q3/2026">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label fw-bold">M√£ D·ª± √°n</label>
                                <input type="text" class="form-control bg-light" id="proj-code" readonly
                                    placeholder="T·ª± ƒë·ªông t·∫°o">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <label class="form-label fw-bold">Ng√†y b·∫Øt ƒë·∫ßu</label>
                                <input type="date" class="form-control" id="proj-start">
                            </div>
                            <div class="col-md-3 mb-3">
                                <label class="form-label fw-bold">Ng√†y k·∫øt th√∫c</label>
                                <input type="date" class="form-control" id="proj-end">
                            </div>
                            <div class="col-md-3 mb-3">
                                <label class="form-label fw-bold">Ch·ªâ ti√™u (Ng∆∞·ªùi)</label>
                                <input type="number" class="form-control" id="proj-quota" placeholder="VD: 5">
                            </div>
                            <div class="col-md-3 mb-3">
                                <label class="form-label fw-bold">Ng√¢n s√°ch (VNƒê)</label>
                                <input type="number" class="form-control" id="proj-budget" placeholder="VD: 50.000.000">
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label fw-bold">Qu·∫£n tr·ªã D·ª± √°n</label>
                            <select class="form-select" id="proj-manager">
                                <option value="Admin">Admin</option>
                            </select>
                        </div>

                        <hr>
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <label class="form-label fw-bold mb-0">Quy tr√¨nh Tuy·ªÉn d·ª•ng (C√°c b∆∞·ªõc ph·ªèng
                                v·∫•n)</label>
                            <button type="button" class="btn btn-sm btn-outline-primary" onclick="addProjectStage()">
                                <i class="fas fa-plus"></i> Th√™m b∆∞·ªõc
                            </button>
                        </div>
                        <div id="project-stages-container" class="vstack gap-2 border p-3 rounded bg-light mb-4"
                            style="max-height: 200px; overflow-y: auto;">
                            <!-- Stage items will be injected here -->
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal">ƒê√≥ng</button>
                    <button type="button" class="btn btn-primary px-4 fw-bold" onclick="saveProject()">L∆∞u
                        D·ª±
                        √°n</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: CREATE RECRUITMENT TICKET -->
    <div class="modal fade" id="ticketModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title fw-bold"><i class="fas fa-ticket-alt me-2"></i>T·∫°o Phi·∫øu Y√™u c·∫ßu
                        Tuy·ªÉn d·ª•ng
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <!-- Ticket Statistics Area (Sync with Project Style) -->
                    <div id="ticket-stats-container" class="mb-4" style="display:none;">
                        <div class="row g-3 mb-4">
                            <div class="col-md-3">
                                <div class="card border-0 shadow-sm text-center p-3 h-100"
                                    style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);">
                                    <div class="text-primary fw-bold small text-uppercase mb-1"
                                        style="font-size: 0.7rem;">S·ªê L∆Ø·ª¢NG TUY·ªÇN</div>
                                    <div class="h4 mb-0 fw-bold text-primary" id="stat-hired-ratio">0/0
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card border-0 shadow-sm text-center p-3 h-100"
                                    style="background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);">
                                    <div class="text-success fw-bold small text-uppercase mb-1"
                                        style="font-size: 0.7rem;">CHI PH√ç ƒê√É CHI</div>
                                    <div class="h5 mb-0 fw-bold text-success" id="stat-total-costs">0 ƒë
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card border-0 shadow-sm text-center p-3 h-100"
                                    style="background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);">
                                    <div class="text-warning fw-bold small text-uppercase mb-1"
                                        style="font-size: 0.7rem;">DEADLINE</div>
                                    <div class="h4 mb-0 fw-bold text-warning" id="stat-days-left">0</div>
                                    <small class="text-warning-emphasis" style="font-size: 0.6rem;">ng√†y
                                        n·ªØa</small>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card border-0 shadow-sm text-center p-3 h-100"
                                    style="background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);">
                                    <div class="text-purple fw-bold small text-uppercase mb-1"
                                        style="font-size: 0.7rem; color: #7b1fa2;">HI·ªÜU QU·∫¢ (%)</div>
                                    <div class="h4 mb-0 fw-bold" style="color: #7b1fa2;" id="stat-efficiency-perc">0%
                                    </div>
                                    <small class="text-muted" style="font-size: 0.55rem;">(ƒê√∫ng h·∫°n/Y√™u
                                        c·∫ßu)</small>
                                </div>
                            </div>
                        </div>

                        <!-- Hired Candidates List Section -->
                        <div class="card border-0 shadow-sm mb-4">
                            <div class="card-header bg-white py-2">
                                <h6 class="fw-bold mb-0 text-dark"><i class="fas fa-users-check me-2"></i>·ª®ng vi√™n ƒë√£
                                    nh·∫≠n vi·ªác</h6>
                            </div>
                            <div class="card-body p-0">
                                <div class="table-responsive">
                                    <table class="table table-hover align-middle mb-0" style="font-size: 0.85rem;"
                                        id="hired-candidates-table">
                                        <thead class="table-light">
                                            <tr>
                                                <th class="ps-3 border-0">STT</th>
                                                <th class="border-0">·ª®ng vi√™n</th>
                                                <th class="border-0">Ng√†y nh·∫≠n vi·ªác</th>
                                                <th class="border-0">T√¨nh tr·∫°ng</th>
                                                <th class="pe-3 text-center border-0">Thao t√°c</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Recruiter Efficiency -->
                        <div class="row g-2">
                            <div class="col-md-12">
                                <small class="text-muted d-block mb-2 fw-bold"
                                    style="font-size: 0.7rem; text-transform: uppercase;">Chi ti·∫øt hi·ªáu su·∫•t
                                    Recruiter</small>
                                <div id="stat-recruiter-performance" class="vstack gap-2"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Admin Approval Section (New) -->
                    <div id="admin-approval-section" class="alert alert-info border-0 mb-4" style="display:none;">
                        <h6 class="fw-bold mb-3"><i class="fas fa-user-shield me-2"></i>Ph√™ duy·ªát Ticket
                            (Admin Only)
                        </h6>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label small fw-bold">Ph√¢n c√¥ng Recruiter</label>
                                <select class="form-select form-select-sm" id="tick-admin-recruiter">
                                    <option value="">-- Ch·ªçn Recruiter --</option>
                                </select>
                            </div>
                            <div class="col-md-6 text-end d-flex align-items-end justify-content-end gap-2">
                                <button class="btn btn-sm btn-success px-3"
                                    onclick="approveTicketAction('Approved')">Duy·ªát</button>
                                <button class="btn btn-sm btn-danger px-3" onclick="approveTicketAction('Rejected')">T·ª´
                                    ch·ªëi</button>
                            </div>
                            <div class="col-12">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <label class="form-label small fw-bold mb-0">Qu·∫£n l√Ω Chi ph√≠</label>
                                    <button class="btn btn-sm btn-link text-decoration-none p-0" onclick="addCostRow()">
                                        <i class="fas fa-plus"></i> Th√™m chi ph√≠
                                    </button>
                                </div>
                                <div id="tick-costs-container" class="vstack gap-2">
                                    <!-- Dynamic cost rows -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <form id="ticket-form">
                        <div class="row mb-3">
                            <div class="col-md-8">
                                <label class="form-label fw-bold">Thu·ªôc D·ª± √°n <span class="text-danger">*</span></label>
                                <select class="form-select" id="tick-project" required>
                                    <option value="">-- Ch·ªçn D·ª± √°n --</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label fw-bold">S·ªë l∆∞·ª£ng tuy·ªÉn <span
                                        class="text-danger">*</span></label>
                                <input type="number" class="form-control" id="tick-quantity" value="1" min="1">
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label fw-bold">Ph√≤ng ban <span class="text-danger">*</span></label>
                                <select class="form-select" id="tick-department" required>
                                    <option value="">-- Ch·ªçn Ph√≤ng ban --</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-bold">V·ªã tr√≠ c·∫ßn tuy·ªÉn <span
                                        class="text-danger">*</span></label>
                                <select class="form-select" id="tick-position" required>
                                    <option value="">-- Ch·ªçn V·ªã tr√≠ --</option>
                                </select>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label class="form-label fw-bold text-primary">Ng√†y b·∫Øt ƒë·∫ßu</label>
                                <input type="date" class="form-control" id="tick-start">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label fw-bold text-danger">Deadline <span
                                        class="text-danger">*</span></label>
                                <input type="date" class="form-control" id="tick-deadline">
                            </div>
                            <div class="col-md-4">
                                <label class="form-label fw-bold">Lo·∫°i h√¨nh l√†m vi·ªác</label>
                                <select class="form-select" id="tick-work-type">
                                    <option value="Fulltime">Fulltime</option>
                                    <option value="Parttime">Parttime</option>
                                    <option value="Intern">Intern</option>
                                    <option value="Freelance">Freelance</option>
                                </select>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label class="form-label">H·ªçc v·∫•n</label>
                                <select class="form-select" id="tick-education">
                                    <option value="Kh√¥ng y√™u c·∫ßu">Kh√¥ng y√™u c·∫ßu</option>
                                    <option value="THPT">THPT</option>
                                    <option value="Trung c·∫•p">Trung c·∫•p</option>
                                    <option value="Cao ƒë·∫≥ng">Cao ƒë·∫≥ng</option>
                                    <option value="ƒê·∫°i h·ªçc">ƒê·∫°i h·ªçc</option>
                                    <option value="Sau ƒë·∫°i h·ªçc">Sau ƒë·∫°i h·ªçc</option>
                                </select>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label">Gi·ªõi t√≠nh</label>
                                <select class="form-select" id="tick-gender">
                                    <option value="Kh√¥ng y√™u c·∫ßu">Kh√¥ng y√™u c·∫ßu</option>
                                    <option value="Nam">Nam</option>
                                    <option value="N·ªØ">N·ªØ</option>
                                </select>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <label class="form-label">Tu·ªïi</label>
                                    <input type="text" class="form-control" id="tick-age" placeholder="VD: 22-35">
                                </div>
                                <div class="col-md-8 d-flex align-items-end">
                                    <button type="button" class="btn btn-outline-info w-100"
                                        id="btn-view-jd-from-ticket" onclick="viewLinkedJD()">
                                        <i class="fas fa-external-link-alt me-1"></i> Xem JD chi ti·∫øt li√™n k·∫øt
                                    </button>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label class="form-label">Chuy√™n m√¥n</label>
                                    <input type="text" class="form-control" id="tick-major">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Kinh nghi·ªám</label>
                                    <select class="form-select" id="tick-experience">
                                        <option value="Kh√¥ng y√™u c·∫ßu">Kh√¥ng y√™u c·∫ßu</option>
                                        <option value="D∆∞·ªõi 1 nƒÉm">D∆∞·ªõi 1 nƒÉm</option>
                                        <option value="1-2 nƒÉm">T·ª´ 1 ƒë·∫øn d∆∞·ªõi 2 nƒÉm</option>
                                        <option value="2-3 nƒÉm">T·ª´ 2 ƒë·∫øn d∆∞·ªõi 3 nƒÉm</option>
                                        <option value="3-5 nƒÉm">T·ª´ 3 ƒë·∫øn 5 nƒÉm</option>
                                        <option value="Tr√™n 5 nƒÉm">Tr√™n 5 nƒÉm</option>
                                    </select>
                                </div>
                            </div>

                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label class="form-label">VƒÉn ph√≤ng l√†m vi·ªác</label>
                                    <select class="form-select" id="tick-office">
                                        <option value="">-- Ch·ªçn vƒÉn ph√≤ng --</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Qu·∫£n l√Ω tr·ª±c ti·∫øp</label>
                                    <input type="text" class="form-control" id="tick-manager">
                                </div>
                            </div>
                    </form>
                </div>
                <div class="modal-footer pb-4">
                    <button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal">H·ªßy</button>
                    <button type="button" class="btn btn-warning px-4 fw-bold" id="btn-propose-edit"
                        onclick="saveTicket()" style="display:none;">ƒê·ªÅ xu·∫•t ch·ªânh s·ª≠a</button>
                    <button type="button" class="btn btn-success px-4 fw-bold" id="btn-save-ticket"
                        onclick="saveTicket()">G·ª≠i Y√™u c·∫ßu</button>
                </div>
            </div>
        </div>
    </div>
    <!-- (END OF app-container content) -->

    </div> <!-- END app-container -->

    <!-- CHATBOT AI UI (Moved out of container for better visibility) -->
    <div id="chat-circle"
        class="btn btn-primary rounded-circle shadow-lg animate__animated animate__pulse animate__infinite"
        style="position:fixed; bottom:30px; right:30px; width:65px; height:65px; display:flex; align-items:center; justify-content:center; cursor:pointer; z-index:10000; transition: all 0.3s ease;">
        <i class="fas fa-comments fa-2x"></i>
        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="chat-badge"
            style="display:none;">1</span>
    </div>

    <div id="chat-box" class="card shadow-2xl border-0 animate__animated"
        style="position:fixed; bottom:110px; right:30px; width:380px; height:550px; display:none; z-index:10000; flex-direction:column; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center p-3 border-0">
            <div class="d-flex align-items-center">
                <div class="rounded-circle bg-white p-2 me-3 d-flex align-items-center justify-content-center"
                    style="width:40px; height:40px;">
                    <i class="fas fa-robot text-primary"></i>
                </div>
                <div>
                    <h6 class="mb-0 fw-bold">Tr·ª£ l√Ω Tuy·ªÉn d·ª•ng</h6>
                    <small class="opacity-75"><i class="fas fa-circle text-success me-1" style="font-size:8px;"></i>ƒêang
                        ho·∫°t ƒë·ªông</small>
                </div>
            </div>
            <button type="button" class="btn-close btn-close-white shadow-none" onclick="toggleChat()"></button>
        </div>
        <div id="chat-content" class="card-body overflow-auto p-4"
            style="flex-grow:1; background:#f0f2f5; scroll-behavior: smooth;">
            <div class="d-flex flex-column align-items-start mb-4">
                <div class="msg-ai shadow-sm p-3 rounded-4 bg-white" style="border-bottom-left-radius: 5px !important;">
                    Ch√†o anh/ch·ªã, em l√† Tr·ª£ l√Ω AI! ü§ñ<br>
                    Em c√≥ th·ªÉ gi√∫p anh/ch·ªã tra c·ª©u ·ª©ng vi√™n, so·∫°n JD ho·∫∑c vi·∫øt email. C·∫ßn g√¨ c·ª© b·∫£o em nh√©!
                </div>
                <small class="text-muted mt-1 ms-2" style="font-size: 10px;">AI ‚Ä¢ V·ª´a xong</small>
            </div>
        </div>
        <div class="card-footer bg-white p-3 border-top border-light">
            <div class="input-group bg-light rounded-pill p-1 border">
                <input type="text" id="chat-input" class="form-control border-0 bg-transparent py-2 px-3 shadow-none"
                    placeholder="H·ªèi AI v·ªÅ h·ªá th·ªëng..." onkeypress="if(event.key==='Enter') sendMessage()">
                <button class="btn btn-primary rounded-circle d-flex align-items-center justify-content-center p-2 me-1"
                    style="width:40px; height:40px;" onclick="sendMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <div id="mention-suggestions"></div>

    <style>
        #chat-circle:hover {
            transform: scale(1.1);
            filter: brightness(1.1);
        }

        .msg-user {
            background: linear-gradient(135deg, #0d6efd, #0b5ed7);
            color: white;
            padding: 10px 16px;
            border-radius: 18px 18px 0 18px;
            margin-bottom: 5px;
            align-self: flex-end;
            max-width: 85%;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(13, 110, 253, 0.2);
        }

        .msg-ai {
            background: white;
            color: #2d3436;
            padding: 10px 16px;
            border-radius: 18px 18px 18px 0;
            margin-bottom: 5px;
            align-self: flex-start;
            max-width: 85%;
            font-size: 14px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            line-height: 1.5;
        }

        #chat-content::-webkit-scrollbar {
            width: 5px;
        }

        #chat-content::-webkit-scrollbar-thumb {
            background: #cbd5e0;
            border-radius: 10px;
        }
    </style>
</body>

</html>
